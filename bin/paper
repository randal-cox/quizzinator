##!/usr/bin/env bash

###############################################################
# This is what we run for the paper
###############################################################

###############################################################
# The Buss physical vs emotional jealousy replication study
###############################################################
# The LLM versions
for m in 1.5 7 32 70
do
  echo "ðŸš€ Running Buss Jealousy for deepseek model ${m}B"
  ./bin/experiment \
    --hints Gender \
    --verbose  \
    --experiment ${m}B \
    --model deepseek-r1:${m}B \
    --timeout 600 \
    --attempts 2 \
    --n 202 \
    --questions Gender,Jealousy \
    data/jealousy
  echo
done

# Test reproducibility on the fast 1.5B model
for m in 1.5
do
  for p in 1 2 3 4
  do
    echo "ðŸš€ Running Reproducibility controls for ${m}B pass ${p}"
    ./bin/experiment \
      --hints Gender \
      --verbose \
      --experiment ${m}B_p${p} \
      --model deepseek-r1:${m}B \
      --timeout 600 \
      --attempts 2 \
      --n 202 \
      --questions Gender,Jealousy \
      data/jealousy
    echo
  done
done

# The human data set and a sample of it
echo "ðŸš€ Running whole human data"
./bin/experiment \
  --from-hints \
  --verbose \
  --experiment Humans \
  data/jealousy
echo

echo "ðŸš€ Running partial human data"
./bin/experiment \
  --from-hints \
  --verbose \
  --experiment Humans_66 \
  --n 66 \
  data/jealousy
echo

##############################################################################
# Consent
##############################################################################
# with either Roles or Gender given as a prompt
for e in  Roles Gender
do
  for m in 1.5 7 32 70
  do
    echo "ðŸš€ Running ${e} echo for deepseek model ${m}B"
    ./bin/experiment \
      --hints ${e} \
      --verbose  \
      --experiment ${e}_${m}B \
      --model deepseek-r1:${m}B \
      --timeout 600 \
      --attempts 2 \
      --n 66 \
      --questions PuPSafeword,RRSafeword,${e} \
      data/consent
    echo
    #echo "time ./bin/experiment -hints ${e} --verbose  --experiment matched_${e}_${m}B --model deepseek-r1:${m}B --timeout 600  --attempts 2 --n 66 --questions PuPSafeword,RRSafeword,${e} data/echo"
  done
done

# The human data set and a sample of it
echo "ðŸš€ Running whole human data"
./bin/experiment \
  --from-hints \
  --verbose \
  --experiment Humans \
  data/consent
echo

echo "ðŸš€ Running partial human data"
./bin/experiment \
  --from-hints \
  --verbose \
  --experiment Humans_66 \
  --n 66 \
  data/consent
echo

# Get concordance between the prompt and the LLM response
for m in 1.5 7 32 70
do
  ./bin/concordance data/consent \
    --experiment Roles_${m}B \
    --hints Roles \
    > figures/concordance/${m}B.txt
  echo figures/concordance/${m}B.txt
done
